<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Kenblaze Photography</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .admin-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 2rem;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        .admin-header {
            text-align: center;
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 2px solid #e74c3c;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        .stat-card {
            background: linear-gradient(135deg, #e74c3c, #f39c12);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
        }
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid #eee;
        }
        .tab-btn {
            padding: 1rem 2rem;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        .tab-btn.active {
            color: #e74c3c;
            border-bottom-color: #e74c3c;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .booking-item, .contact-item {
            background: #f8f9fa;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-radius: 10px;
            border-left: 4px solid #e74c3c;
        }
        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        .item-name {
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.1rem;
        }
        .item-date {
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        .item-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        .detail-item {
            display: flex;
            flex-direction: column;
        }
        .detail-label {
            font-weight: 600;
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 0.3rem;
        }
        .detail-value {
            color: #2c3e50;
        }
        .action-buttons {
            margin-top: 1rem;
            display: flex;
            gap: 1rem;
        }
        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        .btn-whatsapp {
            background: #25D366;
            color: white;
        }
        .btn-email {
            background: #3498db;
            color: white;
        }
        .btn-delete {
            background: #e74c3c;
            color: white;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        .empty-state {
            text-align: center;
            padding: 3rem;
            color: #7f8c8d;
        }
        .admin-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        .admin-actions {
            display: flex;
            gap: 1rem;
        }
        .admin-btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .admin-btn {
            background: #3498db;
            color: white;
        }
        .logout-btn {
            background: #e74c3c;
        }
        .admin-btn:hover {
            transform: translateY(-2px);
        }
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        .setting-card {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 15px;
            border-left: 4px solid #3498db;
        }
        .setting-card h4 {
            color: #2c3e50;
            margin-bottom: 1.5rem;
        }
        .form-group {
            margin-bottom: 1rem;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #555;
        }
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }
        .btn-save {
            background: #27ae60;
            color: white;
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <div class="admin-header">
            <div class="admin-nav">
                <h1>üìä Kenblaze Photography Admin</h1>
                <div class="admin-actions">
                    <button onclick="showContentEditor()" class="admin-btn">‚úèÔ∏è Edit Content</button>
                    <button onclick="logout()" class="admin-btn logout-btn">üö™ Logout</button>
                </div>
            </div>
            <p>Monitor bookings and contact messages</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="total-bookings">0</div>
                <div>Total Bookings</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="total-contacts">0</div>
                <div>Contact Messages</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="today-bookings">0</div>
                <div>Today's Bookings</div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('bookings')">üìÖ Bookings</button>
            <button class="tab-btn" onclick="showTab('contacts')" >üìß Messages</button>
            <button class="tab-btn" onclick="showTab('settings')">‚öôÔ∏è Settings</button>
        </div>

        <div id="bookings-tab" class="tab-content active">
            <h3>Recent Bookings</h3>
            <div id="bookings-list"></div>
        </div>

        <div id="contacts-tab" class="tab-content">
            <h3>Contact Messages</h3>
            <div id="contacts-list"></div>
        </div>

        <div id="settings-tab" class="tab-content">
            <h3>Website Settings</h3>
            <div class="settings-grid">
                <div class="setting-card">
                    <h4>üìû Contact Information</h4>
                    <div class="form-group">
                        <label>Event Booking Phone</label>
                        <input type="tel" id="eventPhone" value="+234 706 738 5589">
                    </div>
                    <div class="form-group">
                        <label>Office Phone</label>
                        <input type="tel" id="officePhone" value="+234 806 196 4981">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="businessEmail" value="info@kenblazephotography.com">
                    </div>
                    <button onclick="updateContact()" class="btn btn-save">Save Changes</button>
                </div>
                
                <div class="setting-card">
                    <h4>üí∞ Pricing</h4>
                    <div class="form-group">
                        <label>Basic Package (‚Ç¶)</label>
                        <input type="number" id="basicPrice" value="120000">
                    </div>
                    <div class="form-group">
                        <label>Professional Package (‚Ç¶)</label>
                        <input type="number" id="proPrice" value="240000">
                    </div>
                    <div class="form-group">
                        <label>Premium Package (‚Ç¶)</label>
                        <input type="number" id="premiumPrice" value="400000">
                    </div>
                    <button onclick="updatePricing()" class="btn btn-save">Update Pricing</button>
                </div>
                
                <div class="setting-card">
                    <h4>üìç Business Information</h4>
                    <div class="form-group">
                        <label>Studio Address</label>
                        <textarea id="studioAddress" rows="3">56 MM Way, Opposite Church of God Mission, Benin City, Edo State</textarea>
                    </div>
                    <div class="form-group">
                        <label>Business Hours</label>
                        <input type="text" id="businessHours" value="Mon-sat: 9AM-6PM, sun: 12AM-6PM">
                    </div>
                    <button onclick="updateBusiness()" class="btn btn-save">Save Info</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
        }

        function loadBookings() {
            const bookings = JSON.parse(localStorage.getItem('kenblaze_bookings') || '[]');
            const bookingsList = document.getElementById('bookings-list');
            
            if (bookings.length === 0) {
                bookingsList.innerHTML = '<div class="empty-state">No bookings yet</div>';
                return;
            }
            
            bookingsList.innerHTML = bookings.reverse().map(booking => `
                <div class="booking-item">
                    <div class="item-header">
                        <div class="item-name">${booking.fullName}</div>
                        <div class="item-date">${new Date(booking.timestamp).toLocaleString()}</div>
                    </div>
                    <div class="item-details">
                        <div class="detail-item">
                            <div class="detail-label">Email</div>
                            <div class="detail-value">${booking.email}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Phone</div>
                            <div class="detail-value">${booking.phone}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Package</div>
                            <div class="detail-value">${booking.package}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Date</div>
                            <div class="detail-value">${booking.date}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Time</div>
                            <div class="detail-value">${booking.time}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Location</div>
                            <div class="detail-value">${booking.location}</div>
                        </div>
                    </div>
                    ${booking.details ? `<div style="margin-top: 1rem;"><strong>Details:</strong> ${booking.details}</div>` : ''}
                    <div class="action-buttons">
                        <button class="btn btn-whatsapp" onclick="contactWhatsApp('${booking.phone}', '${booking.fullName}')">WhatsApp</button>
                        <button class="btn btn-email" onclick="contactEmail('${booking.email}', ${JSON.stringify(booking).replace(/'/g, '\"')})">Email</button>
                        <button class="btn btn-delete" onclick="deleteBooking(${booking.id})">Delete</button>
                    </div>
                </div>
            `).join('');
        }

        function loadContacts() {
            const contacts = JSON.parse(localStorage.getItem('kenblaze_contacts') || '[]');
            const contactsList = document.getElementById('contacts-list');
            
            if (contacts.length === 0) {
                contactsList.innerHTML = '<div class="empty-state">No messages yet</div>';
                return;
            }
            
            contactsList.innerHTML = contacts.reverse().map(contact => `
                <div class="contact-item">
                    <div class="item-header">
                        <div class="item-name">${contact.name}</div>
                        <div class="item-date">${new Date(contact.timestamp).toLocaleString()}</div>
                    </div>
                    <div class="item-details">
                        <div class="detail-item">
                            <div class="detail-label">Email</div>
                            <div class="detail-value">${contact.email}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Service</div>
                            <div class="detail-value">${contact.service}</div>
                        </div>
                    </div>
                    <div style="margin-top: 1rem;"><strong>Message:</strong> ${contact.message}</div>
                    <div class="action-buttons">
                        <button class="btn btn-email" onclick="contactEmail('${contact.email}')">Reply</button>
                        <button class="btn btn-delete" onclick="deleteContact(${contact.id})">Delete</button>
                    </div>
                </div>
            `).join('');
        }

        function updateStats() {
            const bookings = JSON.parse(localStorage.getItem('kenblaze_bookings') || '[]');
            const contacts = JSON.parse(localStorage.getItem('kenblaze_contacts') || '[]');
            const today = new Date().toDateString();
            const todayBookings = bookings.filter(b => new Date(b.timestamp).toDateString() === today);
            
            document.getElementById('total-bookings').textContent = bookings.length;
            document.getElementById('total-contacts').textContent = contacts.length;
            document.getElementById('today-bookings').textContent = todayBookings.length;
        }

        function contactWhatsApp(phone, name) {
            const message = `Hello ${name}, thank you for booking with Kenblaze Photography! We'll confirm your session details shortly.`;
            window.open(`https://wa.me/${phone.replace(/\D/g, '')}?text=${encodeURIComponent(message)}`, '_blank');
        }

        function contactEmail(email, bookingData = null) {
            let subject = 'Kenblaze Photography - Thank you for your inquiry';
            let body = '';
            
            if (bookingData) {
                subject = 'Kenblaze Photography - Booking Confirmation';
                body = `Dear ${bookingData.fullName},\n\nThank you for booking with Kenblaze Photography Studio!\n\nYour booking details:\n- Package: ${bookingData.package}\n- Date: ${bookingData.date}\n- Time: ${bookingData.time}\n- Location: ${bookingData.location}\n\nWe will contact you within 24 hours to confirm all details and discuss any special requirements.\n\nFor immediate assistance, please call or WhatsApp us at +234 706 738 5589.\n\nBest regards,\nKenblaze Photography Studio\n56 MM Way, Opposite Church of God Mission, Benin City`;
            } else {
                body = 'Dear Valued Client,\n\nThank you for contacting Kenblaze Photography Studio.\n\nWe have received your message and will respond within 24 hours.\n\nFor immediate assistance, please call or WhatsApp us at +234 706 738 5589.\n\nBest regards,\nKenblaze Photography Studio';
            }
            
            window.open(`mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`, '_blank');
        }

        function deleteBooking(id) {
            if (confirm('Are you sure you want to delete this booking?')) {
                const bookings = JSON.parse(localStorage.getItem('kenblaze_bookings') || '[]');
                const filtered = bookings.filter(b => b.id !== id);
                localStorage.setItem('kenblaze_bookings', JSON.stringify(filtered));
                loadBookings();
                updateStats();
            }
        }

        function deleteContact(id) {
            if (confirm('Are you sure you want to delete this message?')) {
                const contacts = JSON.parse(localStorage.getItem('kenblaze_contacts') || '[]');
                const filtered = contacts.filter(c => c.id !== id);
                localStorage.setItem('kenblaze_contacts', JSON.stringify(filtered));
                loadContacts();
                updateStats();
            }
        }

        function logout() {
            localStorage.removeItem('kenblaze_admin');
            localStorage.removeItem('kenblaze_admin_time');
            window.location.href = 'login.html';
        }
        
        function showContentEditor() {
            alert('Content Editor: This feature allows you to edit website content. Coming soon!');
        }
        
        function updateContact() {
            const eventPhone = document.getElementById('eventPhone').value;
            const officePhone = document.getElementById('officePhone').value;
            const email = document.getElementById('businessEmail').value;
            
            localStorage.setItem('kenblaze_contact', JSON.stringify({
                eventPhone, officePhone, email
            }));
            
            alert('Contact information updated successfully!');
        }
        
        function updatePricing() {
            const basicPrice = document.getElementById('basicPrice').value;
            const proPrice = document.getElementById('proPrice').value;
            const premiumPrice = document.getElementById('premiumPrice').value;
            
            localStorage.setItem('kenblaze_pricing', JSON.stringify({
                basic: basicPrice,
                professional: proPrice,
                premium: premiumPrice
            }));
            
            alert('Pricing updated successfully!');
        }
        
        function updateBusiness() {
            const address = document.getElementById('studioAddress').value;
            const hours = document.getElementById('businessHours').value;
            
            localStorage.setItem('kenblaze_business', JSON.stringify({
                address, hours
            }));
            
            alert('Business information updated successfully!');
        }
        
        function checkAdminAuth() {
            const isAdmin = localStorage.getItem('kenblaze_admin');
            const loginTime = localStorage.getItem('kenblaze_admin_time');
            const currentTime = Date.now();
            
            // Session expires after 24 hours
            if (!isAdmin || !loginTime || (currentTime - loginTime) > 86400000) {
                window.location.href = 'login.html';
                return false;
            }
            return true;
        }

        // Load data on page load
        document.addEventListener('DOMContentLoaded', () => {
            if (!checkAdminAuth()) return;
            
            loadBookings();
            loadContacts();
            updateStats();
            
            // Auto-refresh every 30 seconds
            setInterval(() => {
                loadBookings();
                loadContacts();
                updateStats();
            }, 30000);
        });
    </script>
</body>
</html>